
# Trabalhando com Branches

Branches sÃ£o muito importantes para que vocÃª possa criar alteraÃ§Ãµes ou desenvolver *features* no seu repositÃ³rio sem afetar diretamente seu cÃ³digo principal.
## Conceito

Para que vocÃª possa entender melhor o que Ã© uma Branch e por que Ã© tÃ£o importante aprender a usar essa ferramenta, imagine que todo o seu repositÃ³rio Ã© um multiverso, e cada Branch Ã© um universo, sendo assim, quando vocÃª cria uma alteraÃ§Ã£o em uma Branch (universo), todas as outras permanecem inalteradas.

Isso Ã© muito importante para que vocÃª possa desenvolver novasÂ **features**Â sem arriscar a usabilidade do seu cÃ³digo principal .

## ğŸ® Comandos

`$ git branch` - Lista as Branches que o repositÃ³rio possui.

`$ git branch -v` - Lista o Ãºltimo commit de cada Branch.

`$ git checkout <nomedabranch>` - Muda de Branch.

`$ git checkout -b <nomedabranch>` - Cria uma nova Branch.

`$ git branch -d <nomedabranch>` - exclui a Branch apontada.

`$ git merge <nomedabranch>` - Mescla o conteudo da Branch apontada com a sua branch atual.

## ğŸ–¥ Usando as Branches

### Criando uma Branch
Para criar uma Branch nova use o comando

`$ git checkout -b <nomedabranch>`

Quando uma nova Branch Ã© criada ela **sempre** irÃ¡ apontar inicialmente para o commit que a Branch anterior apontava, recebendo todos os arquivos dela.

#### Exemplo

Caso vocÃª possua uma branch main e crie uma para testes, o resultado serÃ¡ o exibido abaixo.

```mermaid
graph TD;
    Branch-Main --> scd-commit;
    scd-commit --> fst-commit;
    fst-commit --> initial-commit;
    Branch-testes --> scd-commit;
```

Entretanto ao iniciar um novo commit atravÃ©s dessa Branch apenas a Branch testes irÃ¡ apontar para ela, e caso um novo commit seja criado pela branch main, ele em nada afetarÃ¡ a Branch testes

```mermaid
graph TD;
    Branch-Main --> trd-commit;
    trd-commit --> scd-commit;
    scd-commit --> fst-commit;
    fst-commit --> initial-commit;
    Branch-testes --> fst-commit-testes;
    fst-commit-testes --> scd-commit
```
### Excluindo uma Branch
AÂ exclusÃ£oÂ deÂ umaÂ BranchÂ Ã©Â infinitamenteÂ maisÂ fÃ¡cilÂ deÂ entenderÂ doÂ queÂ suaÂ criaÃ§Ã£o, paraÂ istoÂ bastaÂ digitarÂ oÂ comandoÂ aÂ seguirÂ queÂ automaticamenteÂ elaÂ irÃ¡Â serÂ excluÃ­da.

`$ git branch -d <nomedabranch>`

VocÃª deve tomar **cuidado** ao decidir excluir uma Branch, uma vez que todos os commitsÂ originadosÂ a partir dela serÃ£o tambÃ©m deletados.

### Mesclando Branches

A mesclagem de Branches Ã© feita quando hÃ¡ a necessidade de juntar as modificaÃ§Ãµes realizadas em ambas as Branches, como quando uma *feature* criada num ambiente de testes estÃ¡ pronta para ir para o cÃ³digo principal.

Para isso vocÃª pode listar as Branches usando:

`$ git branch`

e usar o comando:

`$ git merge <nomedabranch>`

Dessa maneira, aÂ BranchÂ apontadaÂ serÃ¡Â mescladaÂ naÂ suaÂ BranchÂ atual.

### Conflitos de merge
Um conflito deÂ mergeÂ acontece quando dois ou mais indivÃ­duos editam a mesma linha, ou um mesmo arquivo na totalidade, resultando em um conflito no qual o GIT nÃ£o consegue entender, qual alteraÃ§Ã£o deverÃ¡ ser mantida.

#### Exemplo

Imagine que enquanto vocÃª trabalhava em um arquivo da branch main, outro membro da sua equipe nÃ£o sÃ³ fez modificaÃ§Ãµes na Branch como enviou o commit para o repositÃ³rio remoto. 

Naturalmente, quando vocÃª for adicionar suas modificaÃ§Ãµes ao repositÃ³rio remoto, este erro irÃ¡ aparecer para vocÃª

![erro ao enviar modificaÃ§Ãµes](./images/push-request-failed.PNG)

Corrigir o erro Ã© bem simples, basta baixar as informaÃ§Ãµes no seu repositÃ³rio local usando o comando:

`$Â gitÂ pull`

Entretanto, outroÂ problemaÂ irÃ¡Â surgirÂ chamadoÂ â€œconflitoÂ deÂ *merge*â€

![alerta de conflito](./images/pull-merge-conflict.PNG)

Para resolver esse conflito, vocÃª deverÃ¡ apontar para o GIT qual versÃ£o manter manualmente. VocÃª pode editar o arquivo em um bloco de notas ou usar uma **IDE** como o VS CODE que te permite automatizar uma parte desse processo.

![conflito no bloco de notas](./images/archive-conflicted.PNG)

Entretanto, devo te alertar sobre o cuidado ao resolver conflitos de merge de modo a garantir que todas as funcionalidades implementadas estejam funcionando.

Assim que vocÃª resolver esse conflito e enviar um novo commit para o repositÃ³rio remoto, o GITHUB exibirÃ¡ todas as modificaÃ§Ãµes realizadas.

![conflito resolvido no GITHUB](./images/github-conflict-resolved.PNG)